<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<!-- saved from url=(0094)http://www.euclideanspace.com/maths/geometry/rotations/conversions/eulerToQuaternion/index.htm -->
<html xmlns="http://www.w3.org/1999/xhtml"><!-- InstanceBegin template="/Templates/mathsGeometry.dwt" codeOutsideHTMLIsLocked="false" --><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<!-- #BeginEditable "doctitle" --> 
<title>Maths - Conversion Euler to Quaternion - Martin Baker</title>
<script type="text/javascript"><!--
function calculate(input)
{
var h = parseFloat(input.heading.value)*Math.PI/360;
var a = parseFloat(input.attitude.value)*Math.PI/360;
var b = parseFloat(input.bank.value)*Math.PI/360;
var c1 = Math.cos(h);
var c2 = Math.cos(a);
var c3 = Math.cos(b);
var s1 = Math.sin(h);
var s2 = Math.sin(a);
var s3 = Math.sin(b);
input.qw.value = c1*c2*c3 - s1*s2*s3;
input.qx.value = s1*s2*c3 + c1*c2*s3;
input.qy.value = s1*c2*c3 + c1*s2*s3;
input.qz.value = c1*s2*c3 - s1*c2*s3;
}
//--></script><!-- #EndEditable -->

<!-- #BeginEditable "keywords" -->
<meta name="Keywords" content="maths math euler quaternion rotation conversion">
<!-- #EndEditable -->
<link href="./Maths - Conversion Euler to Quaternion - Martin Baker_files/navigation.css" rel="stylesheet" type="text/css">
<!-- InstanceParam name="books" type="boolean" value="true" -->
</head>
<body>
<!-- google_ad_section_start(weight=ignore) -->
<table width="640" border="0" id="top">
  <tbody><tr>
    <td id="top"><a href="http://www.euclideanspace.com/index.html" title="logo" target="_top"><img id="nav" src="./Maths - Conversion Euler to Quaternion - Martin Baker_files/euclideanspace.gif" alt="logo" width="123" height="33"></a></td>
    <td id="top"><!-- InstanceBeginEditable name="back" --><a href="http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToEuler/index.htm" title="back" target="_top"><img id="mathNav" src="./Maths - Conversion Euler to Quaternion - Martin Baker_files/back.gif" alt="back" width="28" height="16"></a><!-- InstanceEndEditable --></td>
    <td id="top"><!-- InstanceBeginEditable name="up" --><a href="http://www.euclideanspace.com/maths/geometry/rotations/conversions/" title="up" target="_top"><img id="mathNav" src="./Maths - Conversion Euler to Quaternion - Martin Baker_files/up.gif" alt="up" width="28" height="13"></a><!-- InstanceEndEditable --></td>
    <td id="top"><a href="http://www.euclideanspace.com/index.html" title="home" target="_top"><img id="nav" src="./Maths - Conversion Euler to Quaternion - Martin Baker_files/home.gif" alt="home" width="29" height="26"></a></td>
    <td id="top"><!-- InstanceBeginEditable name="next" --><a href="http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToEuler/index.htm" title="next" target="_top"><img id="mathNav" src="./Maths - Conversion Euler to Quaternion - Martin Baker_files/forward.gif" alt="forward" width="28" height="16"></a><!-- InstanceEndEditable --></td>
    <td id="top">&nbsp;</td>
    <td id="top"><!-- InstanceBeginEditable name="read" --><a href="http://www.euclideanspace.com/maths/geometry/rotations/conversions/eulerToQuaternion/books.htm" title="further reading" target="_top">further reading</a><!-- InstanceEndEditable --></td>
    <td id="top"><a href="http://www.euclideanspace.com/more.htm" title="more topics" target="_top">more topics »</a></td>
  </tr>
</tbody></table>
<table width="644" border="0" cellspacing="0" id="nav">
  <tbody><tr id="nav">
    <td id="mjbNav"><a href="http://www.euclideanspace.com/prog/index.htm" title="mjbWorld program" target="_top">programs</a></td>
    <td id="theoryNav"><a href="http://www.euclideanspace.com/threed/index.htm" title="3D theory" target="_top">3D theory</a></td>
    <td id="physicsNav"><a href="http://www.euclideanspace.com/physics/index.htm" title="3D physics" target="_top">physics</a></td>
    <td id="mathNavx"><a href="http://www.euclideanspace.com/maths/index.htm" title="3D maths" target="_top">maths</a></td>
    <td id="softwareNav"><a href="http://www.euclideanspace.com/software/index.htm" title="3D software" target="_top">software</a></td>
    <td id="techNav"><a href="http://www.euclideanspace.com/tech/index.htm" title="technology" target="_top">technology</a></td>
    <td id="copyrightNav"><a href="http://www.euclideanspace.com/site/index.htm" title="about site" target="_top">about site</a></td>
    <td id="sitemapNav"><a href="http://www.euclideanspace.com/atoz/index.htm" title="sitemap and A to Z index" target="_top">sitemap</a></td>
  </tr>
</tbody></table><pre id="nav"><img id="nav" src="./Maths - Conversion Euler to Quaternion - Martin Baker_files/banner43.gif"></pre>
<table width="644" border="0" cellpadding="0" cellspacing="0" id="nav">
<tbody><tr id="nav">
<td id="mathNav"><a href="http://www.euclideanspace.com/maths/index.htm" title="index" target="_top">index</a></td>
<td id="mathNav"><a href="http://www.euclideanspace.com/maths/algebra/index.htm" title="algbra" target="_top">algebra</a></td>
<td id="mathNavx"><a href="http://www.euclideanspace.com/maths/geometry/index.htm" title="geometry" target="_top">geometry</a></td>
<td id="mathNav"><a href="http://www.euclideanspace.com/maths/differential/index.htm" title="calculus" target="_top">calculus</a></td>
<td id="mathNav"><a href="http://www.euclideanspace.com/maths/discrete/index.htm" title="discrete mathematics" target="_top">discrete</a></td>
<td id="mathNav"><a href="http://www.euclideanspace.com/maths/statistics/index.htm" title="statistics" target="_top">statistics</a></td>
<td id="mathNave">&nbsp;</td>
<td id="mathNav"><a href="http://www.euclideanspace.com/maths/standards/index.htm" title="standards" target="_top">standards</a></td>
</tr>
</tbody></table>
<!-- #BeginEditable "banner" --><pre id="nav"><img id="nav" src="./Maths - Conversion Euler to Quaternion - Martin Baker_files/banner35.gif"></pre>
<table width="644" border="0" cellpadding="0" cellspacing="0" id="nav">
<tbody><tr id="nav">
  <td rowspan="2" id="mathNav"><a href="http://www.euclideanspace.com/maths/geometry/index.htm" title="index" target="_top"><br>
    index</a></td>
  <td rowspan="2" id="mathNav"><a href="http://www.euclideanspace.com/maths/geometry/space/index.htm" title="spaces" target="_top"><br>space</a></td>
  <td rowspan="2" id="mathNav"><a href="http://www.euclideanspace.com/maths/geometry/elements/index.htm" title="elements of geometry" target="_top"><br>
    elements</a></td>
  <td rowspan="2" id="mathNav"><a href="http://www.euclideanspace.com/maths/geometry/surfaces/index.htm" title="geometry of surfaces" target="_top"><br>
    surface</a></td>
  <td colspan="3" id="mathNav"><a href="http://www.euclideanspace.com/maths/geometry/transform/index.htm">transformations</a></td>
  <td rowspan="2" id="mathNav"><a href="http://www.euclideanspace.com/maths/geometry/trig/index.htm" title="trigonometry" target="_top"><br>
    trigonometry</a></td>
</tr>
<tr id="nav">
<td id="mathNavx"><a href="http://www.euclideanspace.com/maths/geometry/rotations/index.htm" title="rotation transforms" target="_top">rotation</a></td>
<td id="mathNav"><a href="http://www.euclideanspace.com/maths/geometry/affine/index.htm" title="affine transforms" target="_top">affine</a></td>
<td id="mathNav"><a href="http://www.euclideanspace.com/maths/geometry/transform/index.htm" title="theory of transforms" target="_top">theory</a></td>
</tr>
</tbody></table><pre id="nav"><img id="nav" src="./Maths - Conversion Euler to Quaternion - Martin Baker_files/banner56.gif"></pre>
<table width="644" border="0" cellpadding="0" cellspacing="0" id="nav">
<tbody><tr id="nav">
<td id="mathNav"><a href="http://www.euclideanspace.com/maths/geometry/rotations/index.htm" title="index" target="_top"><br>index</a></td>
<td id="mathNav"><a href="http://www.euclideanspace.com/maths/geometry/rotations/angles/index.htm" title="angles" target="_top"><br>
  angles</a></td>
<td id="mathNav"><a href="http://www.euclideanspace.com/maths/geometry/rotations/euler/index.htm" title="euler" target="_top"><br>
  euler</a></td>
<td id="mathNav"><a href="http://www.euclideanspace.com/maths/geometry/rotations/axisAngle/index.htm" title="axis angle" target="_top"><br>
  axis angle</a></td>
<td id="mathNav"><a href="http://www.euclideanspace.com/maths/geometry/rotations/directionCosines/index.htm" title="direction cosines" target="_top">direction cosines</a></td>
<td id="mathNavx"><a href="http://www.euclideanspace.com/maths/geometry/rotations/conversions/index.htm" title="convertions" target="_top"><br>
  convertions</a></td>
<td id="mathNav"><a href="http://www.euclideanspace.com/maths/geometry/rotations/for/index.htm" title="frame-of-reference" target="_top">frame-of-<br>reference</a></td>
<td id="mathNav"><a href="http://www.euclideanspace.com/maths/geometry/rotations/theory/index.htm" title="theory" target="_top">theory</a></td>
</tr>
</tbody></table><pre id="nav"><img id="nav" src="./Maths - Conversion Euler to Quaternion - Martin Baker_files/banner65.gif"></pre>
<table width="644" border="0" cellpadding="0" cellspacing="0" id="nav">
<tbody><tr id="nav">
<td id="mathNav"><a href="http://www.euclideanspace.com/maths/geometry/rotations/conversions/index.htm" title="index" target="_top"><br>index</a></td>
<td id="mathNav"><a href="http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToMatrix/index.htm" title="axis angle to matrix" target="_top">axis angle to matrix</a></td>
<td id="mathNav"><a href="http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm" title="axis angle to quaternion" target="_top">axis angle to quaternion</a></td>
<td id="mathNav"><a href="http://www.euclideanspace.com/maths/geometry/rotations/conversions/eulerToMatrix/index.htm" title="euler to matrix" target="_top">euler to matrix</a></td>
<td id="mathNavx"><a href="./Maths - Conversion Euler to Quaternion - Martin Baker_files/Maths - Conversion Euler to Quaternion - Martin Baker.htm" title="euler to quaternion" target="_top">euler to quaternion</a></td>
<td id="mathNav"><a href="http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm" title="matrix to quaternion" target="_top">matrix to quaternion</a></td>
<td id="mathNav"><a href="http://www.euclideanspace.com/maths/geometry/rotations/conversions/eulerToAngle/index.htm" title="euler to axis angle" target="_top">euler to axis angle</a></td>
<td id="mathNave">&nbsp;</td>
</tr><tr id="nav">
<td id="mathNave">&nbsp;</td>
<td id="mathNav"><a href="http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm" title="matrix to axis angle" target="_top">matrix to axis angle</a></td>
<td id="mathNav"><a href="http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm" title="quaternion to axis angle" target="_top">quaternion to axis angle</a></td>
<td id="mathNav"><a href="http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToEuler/index.htm" title="matrix to euler" target="_top">matrix to euler</a></td>
<td id="mathNav"><a href="http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToEuler/index.htm" title="quaternion to euler" target="_top">quaternion to euler</a></td>
<td id="mathNav"><a href="http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToMatrix/index.htm" title="quaternion to matrix" target="_top">quaternion to matrix</a></td>
<td id="mathNav"><a href="http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToEuler/index.htm" title="axis angle to euler" target="_top">axis angle to euler</a></td>
<td id="mathNave">&nbsp;</td>
</tr>
</tbody></table>
<!-- #EndEditable -->
<!-- google_ad_section_end -->
<h1><!-- #BeginEditable "title" -->Maths - Conversion Euler to Quaternion<!-- #EndEditable --></h1>
<div id="topContent">
<!-- #BeginEditable "contents" -->
<div id="main">
<h2>Equations</h2>
<p>first method:</p>
<p>w = c1 c2 c3 - s1 s2 s3<br>
  x = s1 s2 c3 +c1 c2 s3<br>
  y = s1 c2 c3 + c1 s2 s3<br>
z = c1 s2 c3 - s1 c2 s3</p>
<p>where:</p>
<ul>
  <li>c<sub>1</sub> = cos(heading / 2)</li>
  <li>c<sub>2</sub> = cos(attitude / 2)</li>
  <li>c<sub>3</sub> = cos(bank / 2)</li>
  <li>s<sub>1</sub> = sin(heading / 2)</li>
  <li>s<sub>2</sub> = sin(attitude / 2)</li>
  <li>s<sub>3</sub> = sin(bank / 2) </li>
</ul>
<p>An alternative form is:</p>
<p> w = Math.sqrt(1.0 + C<sub>1</sub> * C<sub>2</sub> + C<sub>1</sub>*C<sub>3</sub> 
  - S<sub>1</sub> * S<sub>2</sub> * S<sub>3</sub> + C<sub>2</sub>*C<sub>3</sub>) 
  / 2<br>
  x = (C<sub>2</sub> * S<sub>3</sub> + C<sub>1</sub> * S<sub>3</sub> + S<sub>1</sub> 
  * S<sub>2</sub> * C<sub>3</sub>) / (4.0 * w) <br>
  y = (S<sub>1</sub> * C<sub>2</sub> + S<sub>1</sub> * C<sub>3</sub> + C<sub>1</sub> 
  * S<sub>2</sub> * S<sub>3</sub>) / (4.0 * w)<br>
  z = (-S<sub>1</sub> * S<sub>3</sub> + C<sub>1</sub> * S<sub>2</sub> * C<sub>3</sub> 
  + S<sub>2</sub>) /(4.0 * w) <br>
</p>
<p>where:</p>
<ul>
  <li>C<sub>1</sub> = cos(heading)</li>
  <li>C<sub>2</sub> = cos(attitude)</li>
  <li>C<sub>3</sub> = cos(bank)</li>
  <li>S<sub>1</sub> = sin(heading)</li>
  <li>S<sub>2</sub> = sin(attitude)</li>
  <li>S<sub>3</sub> = sin(bank)</li>
</ul>
<p>note: in the second form the angles are not divided by 2. I don't know which 
  of these forms is most stable? However, as <a href="http://www.euclideanspace.com/maths/geometry/rotations/correspondance3.htm">William</a> 
  points out the first is better because it requires the same number of trig operations, 
  no square root, no worry about dividing by zero, uses familiar formulae, and 
  is fairly clearly normalised.</p>
  </div>
<h2>Code</h2>
<p>First method</p>
<pre> public final void rotate(double heading, double attitude, double bank) {<br>    // Assuming the angles are in radians.<br>    double c1 = Math.cos(heading/2);<br>    double s1 = Math.sin(heading/2);<br>    double c2 = Math.cos(attitude/2);<br>    double s2 = Math.sin(attitude/2);<br>    double c3 = Math.cos(bank/2);<br>    double s3 = Math.sin(bank/2);
    double c1c2 = c1*c2;<br>    double s1s2 = s1*s2;<br>    w =c1c2*c3 - s1s2*s3;
  	x =c1c2*s3 + s1s2*c3;
	y =s1*c2*c3 + c1*s2*s3;
	z =c1*s2*c3 - s1*c2*s3;<br>  }</pre>
<p>Second method </p>
<pre> public final void rotate(double heading, double attitude, double bank) {<br>    // Assuming the angles are in radians.<br>    double c1 = Math.cos(heading);<br>    double s1 = Math.sin(heading);<br>    double c2 = Math.cos(attitude);<br>    double s2 = Math.sin(attitude);<br>    double c3 = Math.cos(bank);<br>    double s3 = Math.sin(bank);
    w = Math.sqrt(1.0 + c1 * c2 + c1*c3 - s1 * s2 * s3 + c2*c3) / 2.0;<br>    double w4 = (4.0 * w);<br>    x = (c2 * s3 + c1 * s3 + s1 * s2 * c3) / w4 ;<br>    y = (s1 * c2 + s1 * c3 + c1 * s2 * s3) / w4 ;
    z = (-s1 * s3 + c1 * s2 * c3 +s2) / w4 ;<br>  }</pre>
<h2>Derivation of Equations</h2>
<p>This is derived from a method originally sent to me by <a href="http://www.euclideanspace.com/maths/geometry/rotations/euler/AndyGoldstein.htm">Andy</a>:</p>
<p>The quaternion for the rotation by angle a about unit vector (x1,y1,z1) is 
  given by:</p>
<p>cos(angle/2) + i ( x1 * sin(angle/2)) + j (y1 * sin(angle/2)) + k ( z1 * sin(angle/2))</p>
<p>Therefore:</p>
<table border="1">
  <tbody><tr>
    <td>if h = heading angle (rotation about y)</td>
    <td>then Qh = quaternion for pure heading rotation = cos(h/2) + j sin(h/2) = c1 
  + j s1</td>
    </tr>
  <tr>
    <td>if a = attitude angle (rotation about z)</td>
    <td>then Qa = quaternion for pure attitude rotation = cos(a/2) + k sin(a/2) = c2 
  + k s2</td>
    </tr>
  <tr>
    <td>if b = bank angle (rotation about x)</td>
    <td>then Qb = quaternion for pure bank rotation = cos(b/2) + i sin(b/2) = c3 + 
  i s3</td>
    </tr>
</tbody></table>
<p>where:</p>
<ul>
  <li>c<sub>1</sub> = cos(h / 2)</li>
  <li>c<sub>2</sub> = cos(a / 2)</li>
  <li>c<sub>3</sub> = cos(b / 2)</li>
  <li>s<sub>1</sub> = sin(h / 2)</li>
  <li>s<sub>2</sub> = sin(a / 2)</li>
  <li>s<sub>3</sub> = sin(b / 2)</li>
</ul>
<p>The required quaternion can be calculated by multiplying these individual quaternions</p>
<p>From <a href="http://www.euclideanspace.com/maths/standards/index.htm">our definitions</a> the order of applying these rotations is heading,attitude then bank (about y,z then x). As we saw on <a href="http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/transforms/index.htm">this page</a> the rotation applied first goes on the right hand side of the equation but since we are working in the frame of reference of the moving object the first rotation goes on the left. Applying heading then attitude gives: (Qh * Qa), then applying bank gives:</p>
<p>  Q = (Qh * Qa)* Qb<br>
  Q = ((c1 + j s1)) * (c2 + k s2))* (c3) + i s3))<br>
  Q = (c1 c2 + j s1 c2 + k c1 s2 + j k s1 s2)* (c3 + i s3) <br>
  but jk=i which gives:<br>
  Q = (c1 c2 + i s1 s2 + j s1 c2 + k c1 s2) * (c3 + i s3)<br>
  Q = c1 c2 c3 + i s1 s2 c3 + j s1 c2 c3 + k c1 s2 c3 + i s3 c1 c2 + i i s1 s2 
  s3 + j i s1 c2 s3 + k i c1 s2 s3<br>
  but ii=-1 and j i = -k and k i = j which gives:<br>
  Q = c1 c2 c3 + i s1 s2 c3 + j s1 c2 c3 + k c1 s2 c3 + i c1 c2 s3 + i i s1 s2 
  s3 + j i s1 c2 s3 + k i c1 s2 s3<br>
  Q = (c1 c2 c3 - s1 s2 s3) + i (s1 s2 c3 +c1 c2 s3) + j (s1 c2 c3 + c1 s2 s3) 
  + k (c1 s2 c3 - s1 c2 s3)</p>
<p>if we define Q = w + i x + j y + k z</p>
<p>then</p>
<p>w = c1 c2 c3 - s1 s2 s3<br>
  x = s1 s2 c3 +c1 c2 s3<br>
  y = s1 c2 c3 + c1 s2 s3<br>
z = c1 s2 c3 - s1 c2 s3</p>
<p>William has<a href="http://www.euclideanspace.com/maths/geometry/rotations/william.htm"> proved here</a> that the second method 
  is equivalent to the first.</p>
<div id="main">
<h2>Issues</h2>
<p>It is easier to convert from euler angles to quaternions than the reverse direction, 
  so once you have converted to quaternions it is best to stay in that form.</p>
<p>If you have a different result from that shown on this page it may be that 
  you are using different standards, I have tried to keep the standards consistent 
  across this site and I have tried to define the standards that I am using <a href="http://www.euclideanspace.com/maths/standards/index.htm">here</a>. 
  One of these standards is that the order that the euler rotations are applied 
  is 'NASA standard aeroplane' it uses a slightly different coordinate definition 
  from VRML (z and y axis swapped). Also when working with aeroplanes we often 
  work in terms of the position of external objects relative to the aircraft (i.e. 
  the inverse of its position transform <a href="http://www.euclideanspace.com/maths/geometry/rotations/for/index.htm">as explained 
  here</a>). therefore to get the expression normally used with NASA aeroplane 
  we invert all inputs (change sign of every term with odd number of sine terms) 
  invert output (conjugate quaternion) swap z and y for inputs (swap z and y columns) 
  swap z and y for outputs (swap z and y rows). In the case of aircraft it can 
  make sense to work in terms of the local frame of reference of the aircraft 
  looking out, I have a version of this page that does that <a href="http://www.euclideanspace.com/maths/geometry/rotations/conversions/eulerToQuaternion/indexLocal.htm">here</a>, 
  but be careful as this will no longer be compatible with the rest of this site.</p>
<p>However if you have checked these things and you still have a discrepancy then 
  I have probably made an error so please let me know <a href="http://sourceforge.net/forum/forum.php?forum_id=122133"> 
  here</a>.</p>
<h2>Example</h2>
<table width="100%">
  <tbody><tr> 
    <td>we take the 90 degree rotation from this:</td>
    <td><img src="./Maths - Conversion Euler to Quaternion - Martin Baker_files/rightUp.gif" width="123" height="26"></td>
    <td>to this:</td>
    <td><img src="./Maths - Conversion Euler to Quaternion - Martin Baker_files/rightForward.gif" width="123" height="74"></td>
  </tr>
</tbody></table>
<p>As <a href="http://www.euclideanspace.com/maths/geometry/rotations/euler/index.htm">shown here</a> the axis angle for this rotation 
  is: </p>
<p>heading = 0 degrees<br>
  bank = 90 degrees <br>
attitude = 0 degrees</p>
<p>so substituting this in the above formula gives:</p>
<ul>
  <li>c<sub>1</sub> = cos(heading / 2) = 1</li>
  <li>c<sub>2</sub> = cos(attitude / 2) = 1</li>
  <li>c<sub>3</sub> = cos(bank / 2) = 0.7071</li>
  <li>s<sub>1</sub> = sin(heading / 2) = 0</li>
  <li>s<sub>2</sub> = sin(attitude / 2) = 0</li>
  <li>s<sub>3</sub> = sin(bank / 2) = 0.7071</li>
</ul>
<p>w = c1 c2 c3 - s1 s2 s3 = 0.7071<br>
  x = s1 s2 c3 +c1 c2 s3 = 0.7071<br>
  y = s1 c2 c3 + c1 s2 s3 = 0<br>
z = c1 s2 c3 - s1 c2 s3 = 0</p>
<p>which gives the quaternion 0.7071 + i 0.7071</p>
<p>This agrees with the quaternions <a href="http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/transforms/index.htm">here</a>.</p>
<h2>Angle Calculator and Further examples </h2>
<p>Enter the heading, attitude and bank, in degrees, below. Then click calculate </p>
<form>
  <table border="0">
    <tbody><tr>
      <td><table border="1">
        <tbody><tr>
          <td>heading</td>
          <td><input name="heading" type="text" value="0"></td>
          <td>degrees</td>
        </tr>
        <tr>
          <td>attitude</td>
          <td><input name="attitude" type="text" value="0"></td>
          <td>degrees</td>
        </tr>
        <tr>
          <td>bank</td>
          <td><input name="bank" type="text" value="0"></td>
          <td>degrees</td>
        </tr>
      </tbody></table></td>
    </tr>
    <tr>
      <td><input type="button" name="Calculate" id="Calculate" value="calculate" onclick="calculate(this.form)"></td>
    </tr>
    <tr>
      <td><table border="1">
        <tbody><tr>
          <td>real</td>
          <td>i</td>
          <td>j</td>
          <td>k</td>
        </tr>
        <tr>
          <td><input name="qw" type="text" value="1"></td>
          <td><input name="qx" type="text" value="0"></td>
          <td><input name="qy" type="text" value="0"></td>
          <td><input name="qz" type="text" value="0"></td>
        </tr>
      </tbody></table></td>
    </tr>
  </tbody></table>
</form>
<p>Be careful: very low numbers close to zero are sometimes shown in exponential form like: 6.123031769111886e-17 (I don't know enough about javascript to stop it doing this). If you see a number greater than one then check for the exponent. </p>
<p>If you need to have the option to show angles in radians and a graphical representation I have put a <a href="http://www.euclideanspace.com/maths/geometry/rotations/conversions/eulerToQuaternion/program/index.htm">java applet here</a> which allows the values to be entered and the converted values shown along with a graphical representation of the orientation. </p>
<p>Also further examples in 90 degree steps <a href="http://www.euclideanspace.com/maths/geometry/rotations/conversions/eulerToQuaternion/steps/index.htm">here</a></p>
<div id="sidebar">
<!-- #BeginLibraryItem "/Library/bobMathGoogleAd.lbi" -->
  <div style="height:300px">
    <script type="text/javascript"><!--
google_ad_client = "pub-1034088308314105";
google_alternate_color = "ffcc00";
google_ad_width = 300;
google_ad_height = 250;
google_ad_format = "300x250_as";
google_ad_type = "text_image";
//2007-02-01: math_middle
google_ad_channel = "8019157248";
google_color_border = "FF4500";
google_color_bg = "FFCC00";
google_color_link = "000000";
google_color_text = "8B4513";
google_color_url = "E0AD12";
//--></script>
    <script type="text/javascript" src="./Maths - Conversion Euler to Quaternion - Martin Baker_files/show_ads.js">
  </script><ins style="display:inline-table;border:none;height:250px;margin:0;padding:0;position:relative;visibility:visible;width:300px"><ins id="aswift_0_anchor" style="display:block;border:none;height:250px;margin:0;padding:0;position:relative;visibility:visible;width:300px"><iframe allowtransparency="true" frameborder="0" height="250" hspace="0" marginwidth="0" marginheight="0" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){i+=&#39;.call&#39;;setTimeout(h,0)}else if(h.match){i+=&#39;.nav&#39;;w.location.replace(h)}s.log&amp;&amp;s.log.push(i)}" scrolling="no" vspace="0" width="300" id="aswift_0" name="aswift_0" style="left:0;position:absolute;top:0;"></iframe></ins></ins>
  </div>
  <!-- #EndLibraryItem -->
  <img src="./Maths - Conversion Euler to Quaternion - Martin Baker_files/logo150.jpg" width="256" height="150">  </div>
</div>
<!-- #EndEditable -->
<!-- #BeginEditable "sidebar" -->
<div id="sidebar">
<h3>Prerequisites</h3>
<ul>
  <li>euler angles are <a href="http://www.euclideanspace.com/maths/geometry/rotations/euler/index.htm">explained here</a>.</li>
  <li>quaternions are <a href="http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/index.htm">explained 
    here</a>.</li>
</ul>
The following pages on this site may be helpful in conjunction with this page:
<ul>
  <li><a href="http://www.euclideanspace.com/maths/geometry/rotations/conversions/eulerToQuaternion/program/index.htm">Euler to Quaternion Calculator.</a></li>
  <li><a href="http://www.euclideanspace.com/maths/geometry/rotations/conversions/eulerToQuaternion/steps/index.htm">conversions in 90 steps</a> </li>
  <li><a href="http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToEuler/examples/index.htm">Examples</a></li>
</ul>
<!-- #BeginLibraryItem "/Library/bobMathStandards.lbi" -->
<h2 class="bobMathHeader">Standards </h2>
<div class="sidebarBlock">
  <p>There are a lot of choices we need to make in mathematics, for example, </p>
  <ul>
    <li>Left or right handed coordinate systems.</li>
    <li>Vector shown as row or column.</li>
    <li>Matrix order.</li>
    <li>Direction of x,y and z coordinates.</li>
    <li>Euler angle order</li>
    <li>Direction of positive angles</li>
    <li>Choice of basis for bivectors</li>
    <li>Etc. etc.</li>
  </ul>
  <p>A lot of these choices are arbitrary as long as we are consistent about it, different authors tend to make different choices and this leads to a lot of confusion. Where standards exist I have tried to follow them (for example x3d and MathML) otherwise I have at least tried to be consistent across the site. I have documented the choices I have made <a href="http://www.euclideanspace.com/maths/standards/index.htm">on this page</a>. </p>
</div>
<!-- #EndLibraryItem -->
<!-- #BeginLibraryItem "/Library/bobMathNoelHughes.lbi" -->
<h2 class="bobMathHeader">Quaternion Papers</h2>
<div class="sidebarBlock">
  <p>Noel Hughes has kindly sent me some papers with quaternion training and how this can be applied to spacecraft based on his work in that area. He enjoys challenges, mathematical, operational, developmental or whatever. He is also available for consulting.</p>
  <p><img src="./Maths - Conversion Euler to Quaternion - Martin Baker_files/nhughes.gif" alt="nhughes" width="183" height="16"></p>
  <p>His papers can be downloaded here:</p>
  <ul>
    <li> Quaternion introduction and application to spacecraft: <a href="http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/geometric/quaternionTraining001.pdf">quaternionTraining001.pdf</a></li>
    <li>Quaternion interpolation: <a href="http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/nhughes/ThoughtsOnQuaternion.pdf">ThoughtsOnQuaternion.pdf</a></li>
    <li>Quaternion to Euler conversion: <a href="http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToEuler/quat_2_euler_paper_ver2-1.pdf">quat_2_euler_paper_ver2-1.pdf</a></li>
    <li>Quaternion to DCM conversion: <a href="http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToMatrix/quat2DCM.pdf">quat2DCM.pdf</a></li>
    <li>Euler to  Quaternion conversion: <a href="http://www.euclideanspace.com/maths/geometry/rotations/conversions/eulerToQuaternion/Euler%20to%20quat.pdf">Euler to quat.pdf</a></li>
    <li>DCM to  Quaternion conversion: <a href="http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/DCM2quat.pdf">DCM2quat.pdf</a></li>
  </ul>
</div>
<!-- #EndLibraryItem --></div>
<!-- #EndEditable -->
</div>
<!-- google_ad_section_start(weight=ignore) -->
<hr>
<table width="100%" border="0">
  <tbody><tr bgcolor="#FFCC00"> 
    <td colspan="2"> 
      <div align="center"><b>metadata block</b></div>
    </td>
  </tr>
  <tr bgcolor="#FFCC00" bordercolor="#FF0000"> 
    <td colspan="2"><script type="text/javascript"><!--
google_ad_client = "pub-1034088308314105";
/* math_footer */
google_ad_slot = "6759783759";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript" src="./Maths - Conversion Euler to Quaternion - Martin Baker_files/show_ads.js">
</script><ins style="display:inline-table;border:none;height:90px;margin:0;padding:0;position:relative;visibility:visible;width:728px"><ins id="aswift_1_anchor" style="display:block;border:none;height:90px;margin:0;padding:0;position:relative;visibility:visible;width:728px"><iframe allowtransparency="true" frameborder="0" height="90" hspace="0" marginwidth="0" marginheight="0" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){i+=&#39;.call&#39;;setTimeout(h,0)}else if(h.match){i+=&#39;.nav&#39;;w.location.replace(h)}s.log&amp;&amp;s.log.push(i)}" scrolling="no" vspace="0" width="728" id="aswift_1" name="aswift_1" style="left:0;position:absolute;top:0;"></iframe></ins></ins></td>
  </tr>
  <tr bgcolor="#FFCC00" bordercolor="#FF0000"> 
    <td><b>see also:</b></td>
    <td> <!-- #BeginEditable "also" --> 
      <ul>
        <li><a href="http://www.euclideanspace.com/maths/geometry/rotations/conversions/index.htm">Other Conversions</a></li>
        <li><a href="http://www.euclideanspace.com/maths/geometry/rotations/euler/index.htm">Euler Angles</a></li>
        <li><a href="http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/index.htm">Quaternions</a></li>
        <li><a href="http://www.euclideanspace.com/maths/geometry/rotations/index.htm">Rotations</a></li>
      </ul>
      <p>&nbsp;</p>
      <!-- #EndEditable --></td>
  </tr>
  <tr bgcolor="#FFCC00" bordercolor="#FF0000"> 
    <td><b>Correspondence about this page</b></td>
    <td><!-- #BeginEditable "corr" --> 
      <ul>
        <li><a href="http://www.euclideanspace.com/maths/geometry/rotations/correspondance3.htm">William Lupton</a></li>
        <li><a href="http://www.euclideanspace.com/maths/geometry/rotations/conversions/eulerToQuaternion/mark.htm">Mark Elson</a></li>
      </ul>
      <!-- #EndEditable --></td>
  </tr>
  <tr bgcolor="#FFCC00" bordercolor="#FF0000"> 
    <td> 
      <p><b>Book Shop - <!-- #BeginEditable "fread" --><a href="http://www.euclideanspace.com/maths/geometry/rotations/conversions/eulerToQuaternion/books.htm" target="_top">Further reading</a><!-- #EndEditable -->.</b></p>
      <p>Where I can, I have put links to Amazon for books that are relevant to 
        the subject, click on the appropriate country flag to get more details 
        of the book or to buy it from them.</p>
    </td>
    <td><!-- #BeginEditable "books" --> 
      <p>&nbsp;</p>
      <!-- #BeginLibraryItem "/Library/quaternionsandrotationsequences.lbi" --> 
<p><a href="http://www.amazon.com/exec/obidos/ASIN/0691058725/martinb-20" target="_top"><img src="./Maths - Conversion Euler to Quaternion - Martin Baker_files/0691058725.02.TZZZZZZZ.jpg" border="0" alt="cover" hspace="3" vspace="3" width="69" height="90"></a> 
  <a href="http://www.amazon.com/exec/obidos/ASIN/0691058725/martinb-20" target="_top"><img src="./Maths - Conversion Euler to Quaternion - Martin Baker_files/us50.gif" alt="us" width="30" height="19" border="0"></a> 
  <a href="http://www.amazon.co.uk/exec/obidos/ASIN/0691058725/martinb-21" target="_top"><img src="./Maths - Conversion Euler to Quaternion - Martin Baker_files/amazon-uk-flag-small.gif" alt="uk" width="30" height="19" border="0"></a> 
  <a href="http://www.amazon.de/exec/obidos/ASIN/0691058725/martinb0b-21" target="_top"><img src="./Maths - Conversion Euler to Quaternion - Martin Baker_files/amazon-de-flag-small.gif" alt="de" width="30" height="19" border="0"></a> 
  <a href="http://www.amazon.co.jp/exec/obidos/ASIN/0691058725/martinb-22" target="_top"><img src="./Maths - Conversion Euler to Quaternion - Martin Baker_files/amazon-jp-flag-small.gif" alt="jp" width="30" height="19" border="0"></a> 
  <a href="http://www.amazon.fr/exec/obidos/ASIN/0691058725/martinb06-21" target="_top"><img src="./Maths - Conversion Euler to Quaternion - Martin Baker_files/amazon-fr-flag-small.gif" alt="fr" width="30" height="19" border="0"></a> 
  <a href="http://www.amazon.ca/exec/obidos/ASIN/0691058725/martinb0e-20"><img src="./Maths - Conversion Euler to Quaternion - Martin Baker_files/ca-flag.gif" alt="ca" width="30" height="19" border="0"></a> 
  Quaternions and Rotation Sequences. </p>

<!-- #EndLibraryItem --><!-- #EndEditable --></td>
  </tr>
  <tr bgcolor="#FFCC00" bordercolor="#FF0000"> 
    <td> 
      <p><b>Commercial Software Shop</b></p>
      <p>Where I can, I have put links to Amazon for commercial software, not 
        directly related to the software project, but related to the subject being 
        discussed, click on the appropriate country flag to get more details of 
        the software or to buy it from them.</p>
    </td>
    <td> <!-- #BeginEditable "software" --> 
      <p>&nbsp;</p>
      <!-- #BeginLibraryItem "/Library/darkbasic.lbi" -->
<table width="100%" border="1">
  <tbody><tr> 
    <td><a href="http://www.amazon.com/exec/obidos/ASIN/B0000C7FOD/martinb-20" target="_top"><img src="./Maths - Conversion Euler to Quaternion - Martin Baker_files/B00006G8H1.02.TZZZZZZZ.jpg" border="0" alt="cover" hspace="3" vspace="3"></a> 
      <a href="http://www.amazon.com/exec/obidos/ASIN/B0000C7FOD/martinb-20" target="_top"><img src="./Maths - Conversion Euler to Quaternion - Martin Baker_files/us50.gif" width="30" height="19" border="0"></a> 
      <a href="http://www.amazon.co.uk/exec/obidos/ASIN/B00006G8H1/martinb-21" target="_top"><img src="./Maths - Conversion Euler to Quaternion - Martin Baker_files/amazon-uk-flag-small.gif" width="30" height="19" border="0"></a> 
      Dark Basic Professional Edition - It is better to get this professional 
      edition 
      <p><a href="http://www.amazon.com/exec/obidos/ASIN/B00005V57T/martinb-20" target="_top"><img src="./Maths - Conversion Euler to Quaternion - Martin Baker_files/B00005ABYV.02.TZZZZZZZ.jpg" border="0" alt="cover" hspace="3" vspace="3" width="72" height="90"></a> 
        <a href="http://www.amazon.com/exec/obidos/ASIN/B00005V57T/martinb-20" target="_top"><img src="./Maths - Conversion Euler to Quaternion - Martin Baker_files/us50.gif" width="30" height="19" border="0"></a> 
        <a href="http://www.amazon.co.uk/exec/obidos/ASIN/B00005ABYV/martinb-21" target="_top"><img src="./Maths - Conversion Euler to Quaternion - Martin Baker_files/amazon-uk-flag-small.gif" width="30" height="19" border="0"></a> 
        <a href="http://www.amazon.de/exec/obidos/ASIN/3929418398/martinb0b-21" target="_top"><img src="./Maths - Conversion Euler to Quaternion - Martin Baker_files/amazon-de-flag-small.gif" width="30" height="19" border="0"></a> 
        This is a version of basic designed for building games, for example to 
        rotate a cube you might do the following:<br>
        make object cube 1,100<br>
        for x=1 to 360<br>
        rotate object 1,x,x,0<br>
        next x</p>
      <p><a href="http://www.amazon.com/exec/obidos/ASIN/1592000096/martinb-20"><img src="./Maths - Conversion Euler to Quaternion - Martin Baker_files/1592000096.01.TZZZZZZZ.jpg" border="0" alt="cover" hspace="3" vspace="3" width="73" height="90"></a> 
        <a href="http://www.amazon.com/exec/obidos/ASIN/1592000096/martinb-20" target="_top"><img src="./Maths - Conversion Euler to Quaternion - Martin Baker_files/us50.gif" width="30" height="19" border="0"></a> 
        <a href="http://www.amazon.co.uk/exec/obidos/ASIN/1592000096/martinb-21" target="_top"><img src="./Maths - Conversion Euler to Quaternion - Martin Baker_files/amazon-uk-flag-small.gif" width="30" height="19" border="0"></a> 
        <a href="http://www.amazon.de/exec/obidos/ASIN/1592000096/martinb0b-21" target="_top"><img src="./Maths - Conversion Euler to Quaternion - Martin Baker_files/amazon-de-flag-small.gif" width="30" height="19" border="0"></a> 
        <a href="http://www.amazon.co.jp/exec/obidos/ASIN/1592000096/martinb-22" target="_top"><img src="./Maths - Conversion Euler to Quaternion - Martin Baker_files/amazon-jp-flag-small.gif" width="30" height="19" border="0"></a> 
        <a href="http://www.amazon.fr/exec/obidos/ASIN/1592000096/martinb06-21" target="_top"><img src="./Maths - Conversion Euler to Quaternion - Martin Baker_files/amazon-fr-flag-small.gif" width="30" height="19" border="0"></a> 
        <a href="http://www.amazon.ca/exec/obidos/ASIN/1592000096/martinb0e-20"><img src="./Maths - Conversion Euler to Quaternion - Martin Baker_files/ca-flag.gif" width="30" height="19" border="0"></a> 
        Game Programming with Darkbasic - book for above software</p>
      <ul>
        <li><a href="http://www.euclideanspace.com/software/games/giles.htm">Discussion 
          about using Darkbasic for physics simulation</a></li>
      </ul>
    </td>
  </tr>
</tbody></table>

<!-- #EndLibraryItem --><!-- #EndEditable --></td>
  </tr>
  <tr bgcolor="#FFCC00" bordercolor="#FF0000"> 
    <td> 
      <p><b>Can you help?</b></p>
      <p>Please send me any improvements to <a href="http://sourceforge.net/forum/forum.php?forum_id=122133"> 
        here</a>. I would appreciate ideas to make the pages more useful including 
        error correction, ideas for new pages, improvements to wording. It helps 
        if you quote the full URL of the page.</p>
    </td>
    <td> <!-- #BeginEditable "help" --> 
      <p>&nbsp;</p>
      <!-- #EndEditable --></td>
  </tr>
  <tr bgcolor="#FFCC00" bordercolor="#FF0000"> 
    <td> 
      <p><b>progam</b></p>
      <p>I am working on a project which uses these principles, if you would like 
        to help me with this you are welcome to join in, here:</p>
    </td>
    <td>
      <p><a href="http://sourceforge.net/projects/mjbworld/">http://sourceforge.net/projects/mjbworld/</a></p>
    </td>
  </tr>
</tbody></table>
<p>This site may have errors. Don't use for critical systems.</p>
<p>Copyright (c) 1998-2010 Martin John Baker - All rights reserved - <a href="http://www.euclideanspace.com/site/privacy/index.htm">privacy policy</a>.</p>
<div id="topAd">
<script type="text/javascript"><!--
google_ad_client = "pub-1034088308314105";
/* math_top */
google_ad_slot = "6190416267";
google_ad_width = 180;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript" src="./Maths - Conversion Euler to Quaternion - Martin Baker_files/show_ads.js">
</script><ins style="display:inline-table;border:none;height:90px;margin:0;padding:0;position:relative;visibility:visible;width:180px"><ins id="aswift_2_anchor" style="display:block;border:none;height:90px;margin:0;padding:0;position:relative;visibility:visible;width:180px"><iframe allowtransparency="true" frameborder="0" height="90" hspace="0" marginwidth="0" marginheight="0" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){i+=&#39;.call&#39;;setTimeout(h,0)}else if(h.match){i+=&#39;.nav&#39;;w.location.replace(h)}s.log&amp;&amp;s.log.push(i)}" scrolling="no" vspace="0" width="180" id="aswift_2" name="aswift_2" style="left:0;position:absolute;top:0;"></iframe></ins></ins>
</div>
<!-- google_ad_section_end -->
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script><script src="./Maths - Conversion Euler to Quaternion - Martin Baker_files/ga.js" type="text/javascript"></script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-983407-1");
pageTracker._trackPageview();
</script>

<!-- InstanceEnd -->
</body></html>